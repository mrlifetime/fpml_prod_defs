<html>
    <head>
	<link rel="stylesheet" href="css/highlight/androidstudio.css">
        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/black.css">
    </head>
    <body>
        <div class="reveal">
            <div class="slides">
                <section data-markdown>
<script type="text/template">
## Fpml Product Definitions

Presented by Artyom Arabadji (Bloomberg LP) for FpML Architecture Working Group 2017
aarabadji@bloomberg.net
https://github.com/mrlifetime/fpml_prod_defs
</script>
		</section>
                <section data-markdown>
<script type="text/template">
## Objectives
- Create a view for sharing supported products between execution venues and their clients
- Encode common conventions associated with products
- Ability to represent majority of electronically traded derivatives (currently modelled for IRS only)
- Ability to represent package products that comprise of multiple components
</script>
		</section>

                <section data-markdown>
<script type="text/template">
## Basic design
- Modelled as a schema on top of pre-trade view v5.9
- Avoid changing existing FpML types
- Provide new structures to use existing FpML types
</script>
		</section>

                <section>
<h2>High level structure</h2>
<pre><code data-trim data-noescape>
&lt;ProductDefinitionDocument&gt;
  &lt;!-- header of the document contains useful meta data --&gt;
  &lt;header&gt;
    &lt;platformDate&gt;2016-10-12&lt;/platformDate&gt;
  &lt;/header&gt;

  &lt;!-- multiple definitions go here --&gt;
  &lt;definition&gt;&lt;!-- body --&gt;&lt;/definition&gt;
  &lt;definition&gt;&lt;!-- body --&gt;&lt;/definition&gt;
  &lt;!-- ... --&gt;
 
  &lt;!-- PartiesAndAccounts.model defines parties that are used to encode trade sides --&gt;
  &lt;party id="party1"&gt;
      &lt;partyId&gt;MarketMaker&lt;/partyId&gt;
  &lt;/party&gt;
  &lt;party id="party2"&gt;
      &lt;partyId&gt;PriceTaker&lt;/partyId&gt;
  &lt;/party&gt;
&lt;/ProductDefinitionDocument&gt;
</code></pre>
		</section>

                <section data-markdown>
<script type="text/template">
## High level structure 2 - Product Definition

Product definititon consists of:

- Description - "friendly name" for a product
- Conventions which are observed by the platform
- Product definition itself
- Trade side reference - href to an id that defines the main "side" for the product (optional)
</script>
		</section>

		<section>
<h2>Example - Fixed-Float Vanilla Swap</h2>
<pre><code data-trim data-noescape>
    <mark>&lt;definition id="BPSW5"&gt;</mark> &lt;!-- other products can refer to this definition by its id --&gt;
        &lt;description&gt;GBP SWAP VS 6M 5YR&lt;/description&gt;
        &lt;conventions&gt;
            &lt;maximumQuotePrecisionDecimal&gt;5&lt;/maximumQuotePrecisionDecimal&gt;
            &lt;quoteType&gt;FixedRate&lt;/quoteType&gt;
            &lt;quoteUnit&gt;Percent&lt;/quoteUnit&gt;
        &lt;/conventions&gt;
        &lt;swap&gt;
            &lt;productId productIdScheme="http://www.bloomberg.com/ticker-scheme"&gt;BPSW5&lt;/productId&gt;
            &lt;swapStream id="BPSW5_floatingLeg"&gt;
              &lt;!-- swap stream definition --&gt;
            &lt;/swapStream&gt;
            <mark>&lt;swapStream id="BPSW5_fixedLeg"&gt;</mark>
              &lt;!-- swap stream definition --&gt;
            &lt;/swapStream&gt;
        &lt;/swap&gt;
        <mark>&lt;tradeSideRelativeToSwapStream href="BPSW5_fixedLeg" /&gt;</mark>
    &lt;/definition&gt;
</code></pre>
		</section>

                <section>
<section data-markdown>
<script type="text/template">
## Package structure

Package structure allows to describe products that consist of 2 or more outright (single) products.

User can refer to components by:

- Providing href to product definition elsewhere in the document
- Providing a standard identifier (such as ISIN) for a product NOT defined in the document

</script>
</section>
<section data-markdown>
<script type="text/template">
User can also encode following package details

- Package hedge type
- Risk relationship between legs
- Trade sides relationship for each leg
- Main component that determines the side of the "trade"
</script>
</section>

		</section>

		<section>
<h2>Example - Butterfly swap</h2>
<pre><code data-trim data-noescape>
    &lt;definition id="EU020305"&gt;
        &lt;description&gt;EUR Butterfly 2Y 3Y 5Y&lt;/description&gt;
        &lt;conventions&gt;
            &lt;maximumQuotePrecisionDecimal&gt;3&lt;/maximumQuotePrecisionDecimal&gt;
            &lt;quoteType&gt;Spread&lt;/quoteType&gt;
            &lt;quoteUnit&gt;BasisPoint&lt;/quoteUnit&gt;
        &lt;/conventions&gt;
        &lt;package&gt;
            &lt;productId productIdScheme="http://www.bloomberg.com/ticker-scheme"&gt;EU020305&lt;/productId&gt;
            &lt;packageName&gt;Butterfly&lt;/packageName&gt;
            &lt;hedgeType&gt;DeltaNeutral&lt;/hedgeType&gt;
            &lt;component componentId="EU020305_EUSA2"&gt;
                <mark>&lt;productDefinitionReference href="EUSA2" /&gt;</mark>
                &lt;payerPartyReference href="party1" /&gt;
                &lt;receiverPartyReference href="party2" /&gt;
                &lt;hedgeRiskWeight&gt;0.5&lt;/hedgeRiskWeight&gt;
            &lt;/component&gt;
            &lt;component componentId="EU020305_EUSA3"&gt;
                <mark>&lt;productDefinitionReference href="EUSA3" /&gt;</mark>
                &lt;payerPartyReference href="party2" /&gt;
                &lt;receiverPartyReference href="party1" /&gt;
                &lt;hedgeRiskWeight&gt;1.0&lt;/hedgeRiskWeight&gt;
            &lt;/component&gt;
            &lt;component componentId="EU020305_EUSA5"&gt;
                <mark>&lt;productDefinitionReference href="EUSA5" /&gt;</mark>
                &lt;payerPartyReference href="party1" /&gt;
                &lt;receiverPartyReference href="party2" /&gt;
                &lt;hedgeRiskWeight&gt;0.5&lt;/hedgeRiskWeight&gt;
            &lt;/component&gt;
        &lt;/package&gt;
        &lt;tradeSideRelativeToComponent href="EU020305_EUSA5" /&gt;
    &lt;/definition&gt;
</code></pre>
		</section>

		<section>
<h2>Example - Swap vs Bond</h2>
<pre><code data-trim data-noescape>
    &lt;definition id="USSP5"&gt;
        &lt;description&gt;USD 5Y US TREASURY SPREAD&lt;/description&gt;
        &lt;conventions&gt;
            &lt;maximumQuotePrecisionDecimal&gt;3&lt;/maximumQuotePrecisionDecimal&gt;
            &lt;quoteType&gt;Spread&lt;/quoteType&gt;
            &lt;quoteUnit&gt;BasisPoint&lt;/quoteUnit&gt;
        &lt;/conventions&gt;
        &lt;package&gt;
            &lt;productId productIdScheme="http://www.bloomberg.com/ticker-scheme"&gt;USSP5&lt;/productId&gt;
            &lt;packageName&gt;SwapVsBond&lt;/packageName&gt;
            &lt;hedgeType&gt;DeltaNeutral&lt;/hedgeType&gt;
            &lt;component componentId="USSP5_USSWAP5"&gt;
                <mark>&lt;productDefinitionReference href="USSWAP5" /&gt;</mark>
                &lt;payerPartyReference href="party1" /&gt;
                &lt;receiverPartyReference href="party2" /&gt;
                &lt;hedgeRiskWeight&gt;1.0&lt;/hedgeRiskWeight&gt;
            &lt;/component&gt;
            &lt;component componentId="USSP5_BOND"&gt;
                <mark>&lt;!-- not in the document --&gt;</mark>
                &lt;productId productIdScheme="http://www.fpml.org/spec/2002/instrument-id-ISIN-1-0/"&gt;US912828T677&lt;/productId&gt;
                &lt;buyerPartyReference href="party2" /&gt;
                &lt;sellerPartyReference href="party1" /&gt;
                &lt;hedgeRiskWeight&gt;1.0&lt;/hedgeRiskWeight&gt;
            &lt;/component&gt;
        &lt;/package&gt;
        &lt;tradeSideRelativeToComponent href="USSP5_USSWAP5" /&gt;
    &lt;/definition&gt;
</code></pre>
		</section>

               <section data-markdown>
<script type="text/template">
## Trade sides 
- Allows reader of the document to understand trade side logic
- For a fixed-float swap what side is being quoted?
- For a butterfly swap, how do sides of all components related to each other?
- For more information on how trade sides work see: https://github.com/mrlifetime/fpml_prod_defs/wiki/Encoding-trade-sides
</script>

               <section data-markdown>
<script type="text/template">
## Future work
- Most important: review design with AWG!
- Enumerations for product types, hedge types, quote types, etc
- Business rules
- Documentation
</script>
		</section>

            </div>
        </div>
	<script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>
        <script>
            Reveal.initialize( {
		dependencies: [
		{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
        	{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        	{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        	{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
		{ src: 'plugin/zoom-js/zoom.js', async: true },
		{ src: 'plugin/math/math.js', async: true }
	    	]
	    } );
        </script>
    </body>
</html>

